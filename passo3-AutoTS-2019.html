
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AutoTS 2019 &#8212; ADP255 - Trabalho em Grupo</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="AutoTS 2020" href="passo3-AutoTS-2020.html" />
    <link rel="prev" title="CNN - Convolutional Neural Network" href="passo3-CNN.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">ADP255 - Trabalho em Grupo</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   ADP255 - Machine Learning
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="passo0.html">
   Passo 0: Look at the big picture
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="passo1.html">
   Passo 1: Coletar dados
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="passo2.html">
   Passo 2: Preparar os dados
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="passo3.html">
   Passo 3: Testar diferentes algoritmos preditivos
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="passo3-arima.html">
     ARIMA (SARIMA)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="passo3-CNN.html">
     CNN - Convolutional Neural Network
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     AutoTS 2019
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="passo3-AutoTS-2020.html">
     AutoTS 2020
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="passo3-Prophet-2019.html">
     Prophet 2019
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="passo3-Prophet-2020.html">
     Prophet 2020
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="passo3-VAR-2019.html">
     VAR 2019
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="passo3-VAR-2020.html">
     VAR 2020
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="passo4.html">
   Passo 4: Apresentar e interpretar o modelo
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="passo4-Comparacao.html">
     Comparação entre os algoritmos
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="passo4-VariaveisExplicativas.html">
     Variáveis Explicativas
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="conclusao.html">
   Conclusão
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="referencias.html">
   Referências
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/passo3-AutoTS-2019.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/ronaldowg/adp255"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/ronaldowg/adp255/issues/new?title=Issue%20on%20page%20%2Fpasso3-AutoTS-2019.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/ronaldowg/adp255/main?urlpath=tree/passo3-AutoTS-2019.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="autots-2019">
<h1>AutoTS 2019<a class="headerlink" href="#autots-2019" title="Permalink to this headline">¶</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importa bibliotecas; inicializa variáveis; define funções.</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">auto_ts</span> <span class="k">as</span> <span class="nn">AT</span>
<span class="kn">import</span> <span class="nn">math</span> <span class="k">as</span> <span class="nn">mt</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_squared_error</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">colunas</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">,</span><span class="s1">&#39;total&#39;</span><span class="p">,</span><span class="s1">&#39;ibc&#39;</span><span class="p">,</span><span class="s1">&#39;pib&#39;</span><span class="p">,</span><span class="s1">&#39;consumo&#39;</span><span class="p">,</span> <span class="s1">&#39;ICST-R&#39;</span><span class="p">,</span> <span class="s1">&#39;geracaoGWh&#39;</span><span class="p">,</span><span class="s1">&#39;IndGeral&#39;</span><span class="p">]</span>

<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.grid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

<span class="n">dados_autoML</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;dadosRonaldo.csv&#39;</span><span class="p">)</span>
<span class="n">dados_autoML</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">dados_autoML</span><span class="p">[</span><span class="n">colunas</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>

<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Rows     : &quot;</span> <span class="p">,</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Columns  : &quot;</span> <span class="p">,</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Features : </span><span class="se">\n</span><span class="s2">&quot;</span> <span class="p">,</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Missing values :  &quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">())</span>
<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Unique values :  </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span><span class="n">df</span><span class="o">.</span><span class="n">nunique</span><span class="p">())</span>

<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ImportError</span><span class="g g-Whitespace">                               </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mf">0e5</span><span class="n">f51a1ee2f</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="ne">----&gt; </span><span class="mi">6</span> <span class="kn">import</span> <span class="nn">auto_ts</span> <span class="k">as</span> <span class="nn">AT</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="kn">import</span> <span class="nn">math</span> <span class="k">as</span> <span class="nn">mt</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span> <span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_squared_error</span>

<span class="o">~/</span><span class="n">adp255</span><span class="o">/</span><span class="n">env_adp255</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.9</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">auto_ts</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">39</span> <span class="c1">#######################################</span>
<span class="g g-Whitespace">     </span><span class="mi">40</span> <span class="c1"># Models</span>
<span class="ne">---&gt; </span><span class="mi">41</span> <span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">BuildBase</span><span class="p">,</span> <span class="n">BuildArima</span><span class="p">,</span> <span class="n">BuildAutoSarimax</span><span class="p">,</span> <span class="n">BuildVAR</span><span class="p">,</span> <span class="n">BuildML</span>
<span class="g g-Whitespace">     </span><span class="mi">42</span> <span class="kn">from</span> <span class="nn">.models.build_prophet</span> <span class="kn">import</span> <span class="n">BuildProphet</span>
<span class="g g-Whitespace">     </span><span class="mi">43</span> 

<span class="o">~/</span><span class="n">adp255</span><span class="o">/</span><span class="n">env_adp255</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.9</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">auto_ts</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="kn">from</span> <span class="nn">.ar_based</span> <span class="kn">import</span> <span class="n">BuildArima</span><span class="p">,</span> <span class="n">BuildSarimax</span><span class="p">,</span> <span class="n">BuildAutoSarimax</span><span class="p">,</span> <span class="n">BuildVAR</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="kn">from</span> <span class="nn">.build_ml</span> <span class="kn">import</span> <span class="n">BuildML</span>
<span class="ne">----&gt; </span><span class="mi">4</span> <span class="kn">from</span> <span class="nn">.build_prophet</span> <span class="kn">import</span> <span class="n">BuildProphet</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="kn">from</span> <span class="nn">.build_pyflux</span> <span class="kn">import</span> <span class="n">build_pyflux_model</span>

<span class="o">~/</span><span class="n">adp255</span><span class="o">/</span><span class="n">env_adp255</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.9</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">auto_ts</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="n">build_prophet</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">17</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span> <span class="c1"># type: ignore</span>
<span class="g g-Whitespace">     </span><span class="mi">18</span> 
<span class="ne">---&gt; </span><span class="mi">19</span> <span class="kn">from</span> <span class="nn">fbprophet</span> <span class="kn">import</span> <span class="n">Prophet</span> <span class="c1"># type: ignore</span>
<span class="g g-Whitespace">     </span><span class="mi">20</span> <span class="kn">from</span> <span class="nn">fbprophet.diagnostics</span> <span class="kn">import</span> <span class="n">cross_validation</span>
<span class="g g-Whitespace">     </span><span class="mi">21</span> <span class="kn">from</span> <span class="nn">fbprophet.diagnostics</span> <span class="kn">import</span> <span class="n">performance_metrics</span>

<span class="o">~/</span><span class="n">adp255</span><span class="o">/</span><span class="n">env_adp255</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.9</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">fbprophet</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="c1"># of patent rights can be found in the PATENTS file in the same directory.</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> 
<span class="ne">----&gt; </span><span class="mi">8</span> <span class="kn">from</span> <span class="nn">fbprophet.forecaster</span> <span class="kn">import</span> <span class="n">Prophet</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span> 
<span class="g g-Whitespace">     </span><span class="mi">10</span> <span class="n">__version__</span> <span class="o">=</span> <span class="s1">&#39;0.5&#39;</span>

<span class="o">~/</span><span class="n">adp255</span><span class="o">/</span><span class="n">env_adp255</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.9</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">fbprophet</span><span class="o">/</span><span class="n">forecaster</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">18</span> 
<span class="g g-Whitespace">     </span><span class="mi">19</span> <span class="kn">from</span> <span class="nn">fbprophet.diagnostics</span> <span class="kn">import</span> <span class="n">prophet_copy</span>
<span class="ne">---&gt; </span><span class="mi">20</span> <span class="kn">from</span> <span class="nn">fbprophet.make_holidays</span> <span class="kn">import</span> <span class="n">get_holiday_names</span><span class="p">,</span> <span class="n">make_holidays_df</span>
<span class="g g-Whitespace">     </span><span class="mi">21</span> <span class="kn">from</span> <span class="nn">fbprophet.models</span> <span class="kn">import</span> <span class="n">prophet_stan_model</span>
<span class="g g-Whitespace">     </span><span class="mi">22</span> <span class="kn">from</span> <span class="nn">fbprophet.plot</span> <span class="kn">import</span> <span class="p">(</span><span class="n">plot</span><span class="p">,</span> <span class="n">plot_components</span><span class="p">,</span> <span class="n">plot_forecast_component</span><span class="p">,</span>

<span class="o">~/</span><span class="n">adp255</span><span class="o">/</span><span class="n">env_adp255</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.9</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">fbprophet</span><span class="o">/</span><span class="n">make_holidays</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">14</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="g g-Whitespace">     </span><span class="mi">15</span> 
<span class="ne">---&gt; </span><span class="mi">16</span> <span class="kn">import</span> <span class="nn">fbprophet.hdays</span> <span class="k">as</span> <span class="nn">hdays_part2</span>
<span class="g g-Whitespace">     </span><span class="mi">17</span> <span class="kn">import</span> <span class="nn">holidays</span> <span class="k">as</span> <span class="nn">hdays_part1</span>
<span class="g g-Whitespace">     </span><span class="mi">18</span> 

<span class="o">~/</span><span class="n">adp255</span><span class="o">/</span><span class="n">env_adp255</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.9</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">fbprophet</span><span class="o">/</span><span class="n">hdays</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">14</span> 
<span class="g g-Whitespace">     </span><span class="mi">15</span> <span class="kn">from</span> <span class="nn">convertdate.islamic</span> <span class="kn">import</span> <span class="n">from_gregorian</span><span class="p">,</span> <span class="n">to_gregorian</span>
<span class="ne">---&gt; </span><span class="mi">16</span> <span class="kn">from</span> <span class="nn">holidays</span> <span class="kn">import</span> <span class="n">WEEKEND</span><span class="p">,</span> <span class="n">HolidayBase</span><span class="p">,</span> <span class="n">easter</span><span class="p">,</span> <span class="n">rd</span>
<span class="g g-Whitespace">     </span><span class="mi">17</span> <span class="kn">from</span> <span class="nn">lunardate</span> <span class="kn">import</span> <span class="n">LunarDate</span>
<span class="g g-Whitespace">     </span><span class="mi">18</span> 

<span class="ne">ImportError</span>: cannot import name &#39;easter&#39; from &#39;holidays&#39; (/Users/ronaldogamermann/adp255/env_adp255/lib/python3.9/site-packages/holidays/__init__.py)
</pre></div>
</div>
</div>
</div>
<p>Explorando o conjunto de dados utilizados.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ec_df</span> <span class="o">=</span> <span class="n">df</span>
<span class="n">ec_data</span> <span class="o">=</span> <span class="n">ec_df</span><span class="p">[</span><span class="s1">&#39;total&#39;</span><span class="p">]</span>
<span class="n">ec_data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
<span class="n">ec_data</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">grid</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1e099d58860&gt;
</pre></div>
</div>
<img alt="_images/passo3-AutoTS-2019_3_1.png" src="_images/passo3-AutoTS-2019_3_1.png" />
</div>
</div>
<p>Vamos avaliar o funcionamento da AutoTS, utilizando os dados de 2014 até 2018 para prever o ‘total’ em 2019.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ec_df_2019</span><span class="o">=</span><span class="n">ec_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2019&#39;</span><span class="p">]</span>
<span class="n">ec_data_2019</span><span class="o">=</span><span class="n">ec_df_2019</span><span class="p">[</span><span class="s1">&#39;total&#39;</span><span class="p">]</span>
<span class="n">ec_data_2019</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1e099f9c160&gt;
</pre></div>
</div>
<img alt="_images/passo3-AutoTS-2019_5_1.png" src="_images/passo3-AutoTS-2019_5_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">final_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">final_df</span><span class="o">=</span><span class="n">final_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">final_df</span><span class="o">=</span><span class="n">final_df</span><span class="p">[</span><span class="n">colunas</span><span class="p">]</span>

<span class="n">final_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>data</th>
      <th>total</th>
      <th>ibc</th>
      <th>pib</th>
      <th>consumo</th>
      <th>ICST-R</th>
      <th>geracaoGWh</th>
      <th>IndGeral</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2014-01-01</td>
      <td>13427897</td>
      <td>2.75</td>
      <td>455935.0</td>
      <td>40279759.00</td>
      <td>97.8</td>
      <td>50045.962407</td>
      <td>53.1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2014-02-01</td>
      <td>14152120</td>
      <td>3.13</td>
      <td>450358.8</td>
      <td>41653487.00</td>
      <td>96.7</td>
      <td>46459.730274</td>
      <td>52.3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2014-03-01</td>
      <td>13710770</td>
      <td>3.09</td>
      <td>462159.8</td>
      <td>40269429.00</td>
      <td>96.3</td>
      <td>48004.277170</td>
      <td>52.4</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2014-04-01</td>
      <td>12602895</td>
      <td>2.37</td>
      <td>468767.5</td>
      <td>39591854.00</td>
      <td>92.6</td>
      <td>45412.583753</td>
      <td>49.2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2014-05-01</td>
      <td>14603442</td>
      <td>2.23</td>
      <td>473347.1</td>
      <td>39100499.00</td>
      <td>94.6</td>
      <td>44890.282526</td>
      <td>47.9</td>
    </tr>
    <tr>
      <th>5</th>
      <td>2014-06-01</td>
      <td>13296350</td>
      <td>1.85</td>
      <td>458516.5</td>
      <td>37726472.88</td>
      <td>93.1</td>
      <td>41970.305389</td>
      <td>47.4</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2014-07-01</td>
      <td>14742923</td>
      <td>1.45</td>
      <td>481994.0</td>
      <td>37866809.00</td>
      <td>91.6</td>
      <td>42991.945569</td>
      <td>46.4</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2014-08-01</td>
      <td>14540126</td>
      <td>1.13</td>
      <td>477052.9</td>
      <td>38550694.00</td>
      <td>92.0</td>
      <td>42636.899277</td>
      <td>46.5</td>
    </tr>
    <tr>
      <th>8</th>
      <td>2014-09-01</td>
      <td>15667226</td>
      <td>0.85</td>
      <td>476520.6</td>
      <td>38894976.00</td>
      <td>90.5</td>
      <td>43171.224770</td>
      <td>46.5</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2014-10-01</td>
      <td>14301399</td>
      <td>0.49</td>
      <td>493304.7</td>
      <td>40100440.59</td>
      <td>88.0</td>
      <td>46186.817965</td>
      <td>45.8</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Preparando os conjuntos de treino e teste; também outros parâmetros usado pelo AutoTS.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">traindata</span> <span class="o">=</span> <span class="n">final_df</span><span class="p">[:</span><span class="mi">60</span><span class="p">]</span>
<span class="n">testdata</span> <span class="o">=</span> <span class="n">final_df</span><span class="p">[</span><span class="mi">60</span><span class="p">:</span><span class="mi">72</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">traindata</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">testdata</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="n">ts_column</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span>
<span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span>
<span class="n">target</span> <span class="o">=</span> <span class="s1">&#39;total&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(60, 8) (12, 8)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Dados de treino.</span>
<span class="n">traindata</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>data</th>
      <th>total</th>
      <th>ibc</th>
      <th>pib</th>
      <th>consumo</th>
      <th>ICST-R</th>
      <th>geracaoGWh</th>
      <th>IndGeral</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2014-01-01</td>
      <td>13427897</td>
      <td>2.75</td>
      <td>455935.0</td>
      <td>40279759.0</td>
      <td>97.8</td>
      <td>50045.962407</td>
      <td>53.1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2014-02-01</td>
      <td>14152120</td>
      <td>3.13</td>
      <td>450358.8</td>
      <td>41653487.0</td>
      <td>96.7</td>
      <td>46459.730274</td>
      <td>52.3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2014-03-01</td>
      <td>13710770</td>
      <td>3.09</td>
      <td>462159.8</td>
      <td>40269429.0</td>
      <td>96.3</td>
      <td>48004.277170</td>
      <td>52.4</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2014-04-01</td>
      <td>12602895</td>
      <td>2.37</td>
      <td>468767.5</td>
      <td>39591854.0</td>
      <td>92.6</td>
      <td>45412.583753</td>
      <td>49.2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2014-05-01</td>
      <td>14603442</td>
      <td>2.23</td>
      <td>473347.1</td>
      <td>39100499.0</td>
      <td>94.6</td>
      <td>44890.282526</td>
      <td>47.9</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Dados de teste.</span>
<span class="n">testdata</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>data</th>
      <th>total</th>
      <th>ibc</th>
      <th>pib</th>
      <th>consumo</th>
      <th>ICST-R</th>
      <th>geracaoGWh</th>
      <th>IndGeral</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>60</th>
      <td>2019-01-01</td>
      <td>20039718</td>
      <td>1.13</td>
      <td>578452.6</td>
      <td>40033265.79</td>
      <td>84.5</td>
      <td>53103.613862</td>
      <td>64.6</td>
    </tr>
    <tr>
      <th>61</th>
      <td>2019-02-01</td>
      <td>19745890</td>
      <td>1.35</td>
      <td>567984.5</td>
      <td>39126855.44</td>
      <td>84.3</td>
      <td>47109.519973</td>
      <td>64.6</td>
    </tr>
    <tr>
      <th>62</th>
      <td>2019-03-01</td>
      <td>20240937</td>
      <td>1.21</td>
      <td>579172.6</td>
      <td>41065355.60</td>
      <td>82.1</td>
      <td>49768.704279</td>
      <td>62.0</td>
    </tr>
    <tr>
      <th>63</th>
      <td>2019-04-01</td>
      <td>19011266</td>
      <td>0.91</td>
      <td>592916.0</td>
      <td>40646412.05</td>
      <td>82.5</td>
      <td>47347.279561</td>
      <td>58.4</td>
    </tr>
    <tr>
      <th>64</th>
      <td>2019-05-01</td>
      <td>21433199</td>
      <td>1.57</td>
      <td>604607.4</td>
      <td>39220655.51</td>
      <td>80.7</td>
      <td>46865.964756</td>
      <td>56.5</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Rodando o AutoTS: ferramenta realizando o set inicial e o fit.</p>
<p>“WARNING: Running best models will take time… Be Patient…” &lt;= Aviso da ferramenta…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">AT</span><span class="o">.</span><span class="n">auto_timeseries</span><span class="p">(</span><span class="n">score_type</span><span class="o">=</span><span class="s1">&#39;rmse&#39;</span><span class="p">,</span>
                <span class="n">time_interval</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">,</span>
                <span class="n">non_seasonal_pdq</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">seasonality</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">seasonal_period</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
                <span class="n">model_type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;best&#39;</span><span class="p">],</span>
                <span class="n">verbose</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Lista de Modelos permitidos (10): best, prophet, stats, ml, arima, ARIMA, </span>
<span class="sd">                                    Prophet, SARIMAX, VAR, ML.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">traindata</span><span class="p">,</span> <span class="n">ts_column</span><span class="p">,</span><span class="n">target</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Start of Fit.....
Running Augmented Dickey-Fuller test with paramters:
    maxlag: 31 regression: c autolag: BIC
Error: Stationary test failed. Data must be np.array. Check your input and try stationary test again
    Target variable given as = total
Start of loading of data.....
Input is data frame. Performing Time Series Analysis
ts_column: data sep: , target: total
    Loaded pandas dataframe...
    pandas Dataframe loaded successfully. Shape of data set = (60, 7)
</pre></div>
</div>
<img alt="_images/passo3-AutoTS-2019_12_1.png" src="_images/passo3-AutoTS-2019_12_1.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Time Interval is given as M
    Correct Time interval given as a valid Pandas date-range frequency...
<span class=" -Color -Color-Bold">WARNING: Running best models will take time... Be Patient...</span>


==================================================
Building Prophet Model
==================================================



<span class=" -Color -Color-Bold">Running Facebook Prophet Model...</span>
    Fit-Predict data (shape=(60, 8)) with Confidence Interval = 0.95...
  Starting Prophet Fit
       Adding monthly seasonality to Prophet with period=12, fourier_order=12 and prior_scale=0.10
  Starting Prophet Cross Validation
Max. iterations using expanding window cross validation = 5

Fold Number: 1 --&gt; Train Shape: 35 Test Shape: 5
    Root Mean Squared Error predictions vs actuals = 4,875,434.21
    Std Deviation of actuals = 1,842,443.27
    Normalized RMSE = 265%
Cross Validation window: 1 completed

Fold Number: 2 --&gt; Train Shape: 40 Test Shape: 5
    Root Mean Squared Error predictions vs actuals = 5,990,995.67
    Std Deviation of actuals = 2,427,892.46
    Normalized RMSE = 247%
Cross Validation window: 2 completed

Fold Number: 3 --&gt; Train Shape: 45 Test Shape: 5
    Root Mean Squared Error predictions vs actuals = 573,841.93
    Std Deviation of actuals = 1,597,310.07
    Normalized RMSE = 36%
Cross Validation window: 3 completed

Fold Number: 4 --&gt; Train Shape: 50 Test Shape: 5
    Root Mean Squared Error predictions vs actuals = 4,178,380.13
    Std Deviation of actuals = 2,471,810.70
    Normalized RMSE = 169%
Cross Validation window: 4 completed

Fold Number: 5 --&gt; Train Shape: 55 Test Shape: 5
    Root Mean Squared Error predictions vs actuals = 3,085,526.93
    Std Deviation of actuals = 1,365,998.89
    Normalized RMSE = 226%
Cross Validation window: 5 completed

-------------------------------------------
Model Cross Validation Results:
-------------------------------------------
    MAE (as % Std Dev of Actuals) = 108.81%
    MAPE (Mean Absolute Percent Error) = 18%
    RMSE (Root Mean Squared Error) = 4170623.9184
    Normalized RMSE (MinMax) = 38%
    Normalized RMSE (as Std Dev of Actuals)= 139%
Time Taken = 11 seconds
  End of Prophet Fit


==================================================
Building Auto SARIMAX Model
==================================================



<span class=" -Color -Color-Bold">Running Auto SARIMAX Model...</span>


Best Parameters:
p: None, d: None, q: None
P: None, D: None, Q: None
Seasonality: True
Seasonal Period: 12

Fold Number: 1 --&gt; Train Shape: 35 Test Shape: 5

<span class=" -Color -Color-Bold">    Finding the best parameters using AutoArima:</span>
Performing stepwise search to minimize aic
 ARIMA(0,0,0)(0,0,0)[12] intercept   : AIC=1087.872, Time=0.85 sec
 ARIMA(1,0,0)(1,0,0)[12] intercept   : AIC=1086.303, Time=0.41 sec
 ARIMA(0,0,1)(0,0,1)[12] intercept   : AIC=1088.880, Time=0.14 sec
 ARIMA(0,0,0)(0,0,0)[12]             : AIC=1176.309, Time=0.03 sec
 ARIMA(1,0,0)(0,0,0)[12] intercept   : AIC=1087.539, Time=0.04 sec
 ARIMA(1,0,0)(2,0,0)[12] intercept   : AIC=1087.893, Time=0.64 sec
 ARIMA(1,0,0)(1,0,1)[12] intercept   : AIC=1088.017, Time=0.24 sec
 ARIMA(1,0,0)(0,0,1)[12] intercept   : AIC=1086.876, Time=0.18 sec
 ARIMA(1,0,0)(2,0,1)[12] intercept   : AIC=1089.893, Time=0.71 sec
 ARIMA(0,0,0)(1,0,0)[12] intercept   : AIC=1089.238, Time=0.13 sec
 ARIMA(2,0,0)(1,0,0)[12] intercept   : AIC=1086.289, Time=0.17 sec
 ARIMA(2,0,0)(0,0,0)[12] intercept   : AIC=1087.878, Time=0.06 sec
 ARIMA(2,0,0)(2,0,0)[12] intercept   : AIC=1087.829, Time=0.28 sec
 ARIMA(2,0,0)(1,0,1)[12] intercept   : AIC=1087.933, Time=0.17 sec
 ARIMA(2,0,0)(0,0,1)[12] intercept   : AIC=1086.866, Time=0.21 sec
 ARIMA(2,0,0)(2,0,1)[12] intercept   : AIC=1089.829, Time=0.44 sec
 ARIMA(3,0,0)(1,0,0)[12] intercept   : AIC=1088.344, Time=0.18 sec
 ARIMA(2,0,1)(1,0,0)[12] intercept   : AIC=1087.805, Time=0.12 sec
 ARIMA(1,0,1)(1,0,0)[12] intercept   : AIC=1086.747, Time=0.21 sec
 ARIMA(3,0,1)(1,0,0)[12] intercept   : AIC=1089.155, Time=0.39 sec
 ARIMA(2,0,0)(1,0,0)[12]             : AIC=1084.288, Time=0.15 sec
 ARIMA(2,0,0)(0,0,0)[12]             : AIC=1085.877, Time=0.05 sec
 ARIMA(2,0,0)(2,0,0)[12]             : AIC=1085.826, Time=0.30 sec
 ARIMA(2,0,0)(1,0,1)[12]             : AIC=1085.927, Time=0.12 sec
 ARIMA(2,0,0)(0,0,1)[12]             : AIC=1084.866, Time=0.14 sec
 ARIMA(2,0,0)(2,0,1)[12]             : AIC=1087.826, Time=0.24 sec
 ARIMA(1,0,0)(1,0,0)[12]             : AIC=1084.302, Time=0.14 sec
 ARIMA(3,0,0)(1,0,0)[12]             : AIC=1086.326, Time=0.25 sec
 ARIMA(2,0,1)(1,0,0)[12]             : AIC=1085.774, Time=0.35 sec
 ARIMA(1,0,1)(1,0,0)[12]             : AIC=1084.765, Time=0.22 sec
 ARIMA(3,0,1)(1,0,0)[12]             : AIC=1087.759, Time=0.32 sec

Best model:  ARIMA(2,0,0)(1,0,0)[12]          
Total fit time: 10.225 seconds

Best model is a Seasonal SARIMAX(2,0,0)*(1,0,0,12), aic = 1084.288
Static Forecasts:
    RMSE = 3067863.03
    Std Deviation of Actuals = 1842443.27
    Normalized RMSE = 166.5%

Fold Number: 2 --&gt; Train Shape: 40 Test Shape: 5

<span class=" -Color -Color-Bold">    Finding the best parameters using AutoArima:</span>
Performing stepwise search to minimize aic
 ARIMA(0,0,0)(0,0,0)[12] intercept   : AIC=1254.159, Time=0.03 sec
 ARIMA(1,0,0)(1,0,0)[12] intercept   : AIC=1253.171, Time=0.12 sec
 ARIMA(0,0,1)(0,0,1)[12] intercept   : AIC=1255.006, Time=0.11 sec
 ARIMA(0,0,0)(0,0,0)[12]             : AIC=1360.714, Time=0.03 sec
 ARIMA(1,0,0)(0,0,0)[12] intercept   : AIC=1253.443, Time=0.02 sec
 ARIMA(1,0,0)(2,0,0)[12] intercept   : AIC=1250.913, Time=0.51 sec
 ARIMA(1,0,0)(3,0,0)[12] intercept   : AIC=1252.868, Time=1.18 sec
 ARIMA(1,0,0)(2,0,1)[12] intercept   : AIC=1252.886, Time=0.60 sec
 ARIMA(1,0,0)(1,0,1)[12] intercept   : AIC=1252.877, Time=0.36 sec
 ARIMA(1,0,0)(3,0,1)[12] intercept   : AIC=1254.868, Time=1.87 sec
 ARIMA(0,0,0)(2,0,0)[12] intercept   : AIC=1251.137, Time=0.52 sec
 ARIMA(2,0,0)(2,0,0)[12] intercept   : AIC=1253.014, Time=0.97 sec
 ARIMA(1,0,1)(2,0,0)[12] intercept   : AIC=1252.215, Time=0.70 sec
 ARIMA(0,0,1)(2,0,0)[12] intercept   : AIC=1250.736, Time=0.48 sec
 ARIMA(0,0,1)(1,0,0)[12] intercept   : AIC=1254.112, Time=0.11 sec
 ARIMA(0,0,1)(3,0,0)[12] intercept   : AIC=1252.668, Time=1.56 sec
 ARIMA(0,0,1)(2,0,1)[12] intercept   : AIC=1252.779, Time=0.68 sec
 ARIMA(0,0,1)(1,0,1)[12] intercept   : AIC=1253.615, Time=0.38 sec
 ARIMA(0,0,1)(3,0,1)[12] intercept   : AIC=1254.669, Time=1.43 sec
 ARIMA(0,0,2)(2,0,0)[12] intercept   : AIC=1253.547, Time=0.48 sec
 ARIMA(1,0,2)(2,0,0)[12] intercept   : AIC=1255.737, Time=0.71 sec
 ARIMA(0,0,1)(2,0,0)[12]             : AIC=1248.838, Time=0.45 sec
 ARIMA(0,0,1)(1,0,0)[12]             : AIC=1252.117, Time=0.11 sec
 ARIMA(0,0,1)(3,0,0)[12]             : AIC=1250.773, Time=1.21 sec
 ARIMA(0,0,1)(2,0,1)[12]             : AIC=1250.774, Time=0.59 sec
 ARIMA(0,0,1)(1,0,1)[12]             : AIC=1251.647, Time=0.30 sec
 ARIMA(0,0,1)(3,0,1)[12]             : AIC=1252.773, Time=1.31 sec
 ARIMA(0,0,0)(2,0,0)[12]             : AIC=1244.448, Time=0.30 sec
 ARIMA(0,0,0)(1,0,0)[12]             : AIC=1254.183, Time=0.06 sec
 ARIMA(0,0,0)(3,0,0)[12]             : AIC=inf, Time=1.10 sec
 ARIMA(0,0,0)(2,0,1)[12]             : AIC=inf, Time=0.94 sec
 ARIMA(0,0,0)(1,0,1)[12]             : AIC=1269.307, Time=0.19 sec
 ARIMA(0,0,0)(3,0,1)[12]             : AIC=inf, Time=1.82 sec
 ARIMA(1,0,0)(2,0,0)[12]             : AIC=1248.915, Time=0.63 sec
 ARIMA(1,0,1)(2,0,0)[12]             : AIC=1250.310, Time=0.63 sec

Best model:  ARIMA(0,0,0)(2,0,0)[12]          
Total fit time: 22.510 seconds

Best model is a Seasonal SARIMAX(0,0,0)*(2,0,0,12), aic = 1244.448
Static Forecasts:
    RMSE = 2264975.27
    Std Deviation of Actuals = 2427892.46
    Normalized RMSE = 93.3%

Fold Number: 3 --&gt; Train Shape: 45 Test Shape: 5

<span class=" -Color -Color-Bold">    Finding the best parameters using AutoArima:</span>
Performing stepwise search to minimize aic
 ARIMA(0,0,0)(0,1,0)[12] intercept   : AIC=1049.541, Time=0.05 sec
 ARIMA(1,0,0)(1,1,0)[12] intercept   : AIC=1037.858, Time=0.31 sec
 ARIMA(0,0,1)(0,1,1)[12] intercept   : AIC=1041.031, Time=0.55 sec
 ARIMA(0,0,0)(0,1,0)[12]             : AIC=1131.380, Time=0.01 sec
 ARIMA(1,0,0)(0,1,0)[12] intercept   : AIC=1044.033, Time=0.29 sec
 ARIMA(1,0,0)(2,1,0)[12] intercept   : AIC=1042.865, Time=1.21 sec
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> ARIMA(1,0,0)(1,1,1)[12] intercept   : AIC=inf, Time=0.76 sec
 ARIMA(1,0,0)(0,1,1)[12] intercept   : AIC=1041.240, Time=0.51 sec
 ARIMA(1,0,0)(2,1,1)[12] intercept   : AIC=1044.343, Time=1.29 sec
 ARIMA(0,0,0)(1,1,0)[12] intercept   : AIC=1037.481, Time=0.45 sec
 ARIMA(0,0,0)(2,1,0)[12] intercept   : AIC=1049.013, Time=0.26 sec
 ARIMA(0,0,0)(1,1,1)[12] intercept   : AIC=1040.190, Time=0.66 sec
 ARIMA(0,0,0)(0,1,1)[12] intercept   : AIC=1048.217, Time=0.28 sec
 ARIMA(0,0,0)(2,1,1)[12] intercept   : AIC=1041.104, Time=1.41 sec
 ARIMA(0,0,1)(1,1,0)[12] intercept   : AIC=1036.939, Time=0.48 sec
 ARIMA(0,0,1)(0,1,0)[12] intercept   : AIC=1045.560, Time=0.14 sec
 ARIMA(0,0,1)(2,1,0)[12] intercept   : AIC=1038.760, Time=1.27 sec
 ARIMA(0,0,1)(1,1,1)[12] intercept   : AIC=1041.769, Time=0.82 sec
 ARIMA(0,0,1)(2,1,1)[12] intercept   : AIC=1040.762, Time=1.42 sec
 ARIMA(1,0,1)(1,1,0)[12] intercept   : AIC=inf, Time=0.64 sec
 ARIMA(0,0,2)(1,1,0)[12] intercept   : AIC=1036.292, Time=0.79 sec
 ARIMA(0,0,2)(0,1,0)[12] intercept   : AIC=1046.487, Time=0.19 sec
 ARIMA(0,0,2)(2,1,0)[12] intercept   : AIC=1047.368, Time=0.91 sec
 ARIMA(0,0,2)(1,1,1)[12] intercept   : AIC=inf, Time=0.71 sec
 ARIMA(0,0,2)(0,1,1)[12] intercept   : AIC=1047.162, Time=0.22 sec
 ARIMA(0,0,2)(2,1,1)[12] intercept   : AIC=inf, Time=1.36 sec
 ARIMA(1,0,2)(1,1,0)[12] intercept   : AIC=inf, Time=0.76 sec
 ARIMA(0,0,3)(1,1,0)[12] intercept   : AIC=1040.973, Time=0.62 sec
 ARIMA(1,0,3)(1,1,0)[12] intercept   : AIC=inf, Time=0.78 sec
 ARIMA(0,0,2)(1,1,0)[12]             : AIC=1033.874, Time=0.48 sec
 ARIMA(0,0,2)(0,1,0)[12]             : AIC=1044.303, Time=0.09 sec
 ARIMA(0,0,2)(2,1,0)[12]             : AIC=1045.144, Time=1.09 sec
 ARIMA(0,0,2)(1,1,1)[12]             : AIC=inf, Time=0.65 sec
 ARIMA(0,0,2)(0,1,1)[12]             : AIC=1044.989, Time=0.41 sec
 ARIMA(0,0,2)(2,1,1)[12]             : AIC=1046.301, Time=1.27 sec
 ARIMA(0,0,1)(1,1,0)[12]             : AIC=1034.567, Time=0.38 sec
 ARIMA(1,0,2)(1,1,0)[12]             : AIC=inf, Time=0.51 sec
 ARIMA(0,0,3)(1,1,0)[12]             : AIC=1037.545, Time=0.51 sec
 ARIMA(1,0,1)(1,1,0)[12]             : AIC=1032.503, Time=0.48 sec
 ARIMA(1,0,1)(0,1,0)[12]             : AIC=1044.195, Time=0.23 sec
 ARIMA(1,0,1)(2,1,0)[12]             : AIC=1041.841, Time=1.39 sec
 ARIMA(1,0,1)(1,1,1)[12]             : AIC=inf, Time=0.66 sec
 ARIMA(1,0,1)(0,1,1)[12]             : AIC=1041.149, Time=0.53 sec
 ARIMA(1,0,1)(2,1,1)[12]             : AIC=1044.539, Time=1.36 sec
 ARIMA(1,0,0)(1,1,0)[12]             : AIC=1036.180, Time=0.36 sec
 ARIMA(2,0,1)(1,1,0)[12]             : AIC=inf, Time=0.69 sec
 ARIMA(0,0,0)(1,1,0)[12]             : AIC=1032.427, Time=0.27 sec
 ARIMA(0,0,0)(2,1,0)[12]             : AIC=1062.664, Time=0.24 sec
 ARIMA(0,0,0)(1,1,1)[12]             : AIC=1037.355, Time=0.60 sec
 ARIMA(0,0,0)(0,1,1)[12]             : AIC=1046.410, Time=0.30 sec
 ARIMA(0,0,0)(2,1,1)[12]             : AIC=inf, Time=1.01 sec

Best model:  ARIMA(0,0,0)(1,1,0)[12]          
Total fit time: 32.755 seconds

Best model is a Seasonal SARIMAX(0,0,0)*(1,1,0,12), aic = 1032.427
Static Forecasts:
    RMSE = 2224160.46
    Std Deviation of Actuals = 1597310.07
    Normalized RMSE = 139.2%

Fold Number: 4 --&gt; Train Shape: 50 Test Shape: 5

<span class=" -Color -Color-Bold">    Finding the best parameters using AutoArima:</span>
Performing stepwise search to minimize aic
 ARIMA(0,0,0)(0,1,0)[12] intercept   : AIC=1219.645, Time=0.05 sec
 ARIMA(1,0,0)(1,1,0)[12] intercept   : AIC=1200.385, Time=0.40 sec
 ARIMA(0,0,1)(0,1,1)[12] intercept   : AIC=1204.364, Time=0.35 sec
 ARIMA(0,0,0)(0,1,0)[12]             : AIC=1318.961, Time=0.01 sec
 ARIMA(1,0,0)(0,1,0)[12] intercept   : AIC=1208.831, Time=0.14 sec
 ARIMA(1,0,0)(2,1,0)[12] intercept   : AIC=1202.053, Time=1.25 sec
 ARIMA(1,0,0)(1,1,1)[12] intercept   : AIC=1202.107, Time=0.63 sec
 ARIMA(1,0,0)(0,1,1)[12] intercept   : AIC=1203.182, Time=0.31 sec
 ARIMA(1,0,0)(2,1,1)[12] intercept   : AIC=1204.027, Time=1.38 sec
 ARIMA(0,0,0)(1,1,0)[12] intercept   : AIC=1202.435, Time=0.35 sec
 ARIMA(2,0,0)(1,1,0)[12] intercept   : AIC=1201.265, Time=0.46 sec
 ARIMA(1,0,1)(1,1,0)[12] intercept   : AIC=1200.470, Time=0.55 sec
 ARIMA(0,0,1)(1,1,0)[12] intercept   : AIC=1200.908, Time=0.26 sec
 ARIMA(2,0,1)(1,1,0)[12] intercept   : AIC=1202.169, Time=0.64 sec
 ARIMA(1,0,0)(1,1,0)[12]             : AIC=1198.306, Time=0.30 sec
 ARIMA(1,0,0)(0,1,0)[12]             : AIC=1206.852, Time=0.10 sec
 ARIMA(1,0,0)(2,1,0)[12]             : AIC=1199.987, Time=1.03 sec
 ARIMA(1,0,0)(1,1,1)[12]             : AIC=1200.026, Time=0.41 sec
 ARIMA(1,0,0)(0,1,1)[12]             : AIC=1201.078, Time=0.32 sec
 ARIMA(1,0,0)(2,1,1)[12]             : AIC=1201.974, Time=1.61 sec
 ARIMA(0,0,0)(1,1,0)[12]             : AIC=inf, Time=0.48 sec
 ARIMA(2,0,0)(1,1,0)[12]             : AIC=1199.019, Time=0.48 sec
 ARIMA(1,0,1)(1,1,0)[12]             : AIC=1199.406, Time=0.50 sec
 ARIMA(0,0,1)(1,1,0)[12]             : AIC=1198.804, Time=0.35 sec
 ARIMA(2,0,1)(1,1,0)[12]             : AIC=1200.387, Time=0.57 sec

Best model:  ARIMA(1,0,0)(1,1,0)[12]          
Total fit time: 13.002 seconds

Best model is a Seasonal SARIMAX(1,0,0)*(1,1,0,12), aic = 1198.306
Static Forecasts:
    RMSE = 1088324.63
    Std Deviation of Actuals = 2471810.70
    Normalized RMSE = 44.0%

Fold Number: 5 --&gt; Train Shape: 55 Test Shape: 5

<span class=" -Color -Color-Bold">    Finding the best parameters using AutoArima:</span>
Performing stepwise search to minimize aic
 ARIMA(0,0,0)(0,1,0)[12] intercept   : AIC=1375.569, Time=0.04 sec
 ARIMA(1,0,0)(1,1,0)[12] intercept   : AIC=1353.183, Time=0.43 sec
 ARIMA(0,0,1)(0,1,1)[12] intercept   : AIC=1359.650, Time=0.34 sec
 ARIMA(0,0,0)(0,1,0)[12]             : AIC=1493.302, Time=0.01 sec
 ARIMA(1,0,0)(0,1,0)[12] intercept   : AIC=1364.199, Time=0.25 sec
 ARIMA(1,0,0)(2,1,0)[12] intercept   : AIC=1358.170, Time=0.98 sec
 ARIMA(1,0,0)(1,1,1)[12] intercept   : AIC=1358.312, Time=0.46 sec
 ARIMA(1,0,0)(0,1,1)[12] intercept   : AIC=1359.476, Time=0.14 sec
 ARIMA(1,0,0)(2,1,1)[12] intercept   : AIC=1360.526, Time=1.51 sec
 ARIMA(0,0,0)(1,1,0)[12] intercept   : AIC=1358.250, Time=0.38 sec
 ARIMA(2,0,0)(1,1,0)[12] intercept   : AIC=1357.627, Time=0.44 sec
 ARIMA(1,0,1)(1,1,0)[12] intercept   : AIC=1356.367, Time=0.74 sec
 ARIMA(0,0,1)(1,1,0)[12] intercept   : AIC=1352.841, Time=0.53 sec
 ARIMA(0,0,1)(0,1,0)[12] intercept   : AIC=1367.295, Time=0.12 sec
 ARIMA(0,0,1)(2,1,0)[12] intercept   : AIC=1358.140, Time=0.75 sec
 ARIMA(0,0,1)(1,1,1)[12] intercept   : AIC=1358.333, Time=0.68 sec
 ARIMA(0,0,1)(2,1,1)[12] intercept   : AIC=1360.284, Time=1.64 sec
 ARIMA(0,0,2)(1,1,0)[12] intercept   : AIC=1359.616, Time=0.57 sec
 ARIMA(1,0,2)(1,1,0)[12] intercept   : AIC=1359.645, Time=0.66 sec
 ARIMA(0,0,1)(1,1,0)[12]             : AIC=1354.768, Time=0.27 sec

Best model:  ARIMA(0,0,1)(1,1,0)[12] intercept
Total fit time: 11.380 seconds

Best model is a Seasonal SARIMAX(0,0,1)*(1,1,0,12), aic = 1352.841
Static Forecasts:
    RMSE = 2754985.06
    Std Deviation of Actuals = 1365998.89
    Normalized RMSE = 201.7%

SARIMAX RMSE (all folds): 2280061.6897
SARIMAX Norm RMSE (all folds): 73%


-------------------------------------------
Model Cross Validation Results:
-------------------------------------------
    MAE (as % Std Dev of Actuals) = 63.10%
    MAPE (Mean Absolute Percent Error) = 10%
    RMSE (Root Mean Squared Error) = 2377527.2646
    Normalized RMSE (MinMax) = 22%
    Normalized RMSE (as Std Dev of Actuals)= 79%

<span class=" -Color -Color-Bold">    Finding the best parameters using AutoArima:</span>
Performing stepwise search to minimize aic
 ARIMA(0,0,0)(0,0,0)[12] intercept   : AIC=1906.268, Time=0.04 sec
 ARIMA(1,0,0)(1,0,0)[12] intercept   : AIC=1894.737, Time=0.14 sec
 ARIMA(0,0,1)(0,0,1)[12] intercept   : AIC=1899.439, Time=0.12 sec
 ARIMA(0,0,0)(0,0,0)[12]             : AIC=2090.928, Time=0.05 sec
 ARIMA(1,0,0)(0,0,0)[12] intercept   : AIC=1900.572, Time=0.05 sec
 ARIMA(1,0,0)(2,0,0)[12] intercept   : AIC=1891.502, Time=0.58 sec
 ARIMA(1,0,0)(3,0,0)[12] intercept   : AIC=1893.379, Time=0.75 sec
 ARIMA(1,0,0)(2,0,1)[12] intercept   : AIC=1893.323, Time=0.81 sec
 ARIMA(1,0,0)(1,0,1)[12] intercept   : AIC=1893.698, Time=0.20 sec
 ARIMA(1,0,0)(3,0,1)[12] intercept   : AIC=1895.319, Time=2.05 sec
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> ARIMA(0,0,0)(2,0,0)[12] intercept   : AIC=1899.074, Time=0.38 sec
 ARIMA(2,0,0)(2,0,0)[12] intercept   : AIC=1893.792, Time=0.60 sec
 ARIMA(1,0,1)(2,0,0)[12] intercept   : AIC=1893.821, Time=0.45 sec
 ARIMA(0,0,1)(2,0,0)[12] intercept   : AIC=1893.204, Time=0.31 sec
 ARIMA(2,0,1)(2,0,0)[12] intercept   : AIC=1895.789, Time=1.07 sec
 ARIMA(1,0,0)(2,0,0)[12]             : AIC=1889.494, Time=0.36 sec
 ARIMA(1,0,0)(1,0,0)[12]             : AIC=1892.733, Time=0.09 sec
 ARIMA(1,0,0)(3,0,0)[12]             : AIC=1891.333, Time=1.03 sec
 ARIMA(1,0,0)(2,0,1)[12]             : AIC=1891.317, Time=0.82 sec
 ARIMA(1,0,0)(1,0,1)[12]             : AIC=1891.681, Time=0.20 sec
 ARIMA(1,0,0)(3,0,1)[12]             : AIC=1893.327, Time=1.56 sec
 ARIMA(0,0,0)(2,0,0)[12]             : AIC=1893.809, Time=0.28 sec
 ARIMA(2,0,0)(2,0,0)[12]             : AIC=1891.814, Time=0.30 sec
 ARIMA(1,0,1)(2,0,0)[12]             : AIC=1891.817, Time=0.36 sec
 ARIMA(0,0,1)(2,0,0)[12]             : AIC=1891.209, Time=0.31 sec
 ARIMA(2,0,1)(2,0,0)[12]             : AIC=1893.785, Time=0.67 sec

Best model:  ARIMA(1,0,0)(2,0,0)[12]          
Total fit time: 13.600 seconds

Best model is a Seasonal SARIMAX(1,0,0)*(2,0,0,12), aic = 1889.494
<span class=" -Color -Color-Bold">Refitting data with previously found best parameters</span>
    Best aic metric = 1111.1
                                     SARIMAX Results                                      
==========================================================================================
Dep. Variable:                              total   No. Observations:                   60
Model:             SARIMAX(1, 0, 0)x(2, 0, 0, 12)   Log Likelihood                -543.531
Date:                            Fri, 11 Jun 2021   AIC                           1111.061
Time:                                    09:04:03   BIC                           1129.725
Sample:                                01-01-2014   HQIC                          1117.504
                                     - 12-01-2018                                         
Covariance Type:                              opg                                         
==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
intercept   1.675e+04   7169.727      2.336      0.019    2696.478    3.08e+04
drift       -219.1597   1.72e+05     -0.001      0.999   -3.37e+05    3.37e+05
ibc         1.013e+06   7.96e+04     12.731      0.000    8.57e+05    1.17e+06
pib           57.4514     47.570      1.208      0.227     -35.785     150.687
consumo        0.6716      0.958      0.701      0.483      -1.206       2.549
ICST-R     -1.317e+05   1.92e+05     -0.687      0.492   -5.08e+05    2.44e+05
geracaoGWh    52.4923    348.497      0.151      0.880    -630.548     735.533
IndGeral   -3.439e+04   1.42e+05     -0.243      0.808   -3.12e+05    2.43e+05
ar.L1          0.3211      0.495      0.649      0.516      -0.649       1.291
ar.S.L12       0.0842      0.402      0.209      0.834      -0.704       0.873
ar.S.L24       0.9302      0.609      1.528      0.127      -0.263       2.123
sigma2      2.505e+12      0.036   6.97e+13      0.000    2.51e+12    2.51e+12
===================================================================================
Ljung-Box (L1) (Q):                   0.01   Jarque-Bera (JB):                 2.84
Prob(Q):                              0.94   Prob(JB):                         0.24
Heteroskedasticity (H):               1.38   Skew:                             0.65
Prob(H) (two-sided):                  0.59   Kurtosis:                         3.48
===================================================================================

Warnings:
[1] Covariance matrix calculated using the outer product of gradients (complex-step).
[2] Covariance matrix is singular or near-singular, with condition number 1.51e+29. Standard errors may be unstable.


==================================================
Building VAR Model - best suited for small datasets &lt; 1000 rows and &lt; 10 columns
==================================================



<span class=" -Color -Color-Bold">Running VAR Model...</span>
    Shifting 6 predictors by 1 to align prior predictor values with current target values...

Fold Number: 1 --&gt; Train Shape: 34 Test Shape: 5

Additional Variable in VAR model = ibc
 Iteration 1 completed
 Iteration 2 completed
 Iteration 3 completed
 Iteration 4 completed
 Iteration 5 completed
 Iteration 6 completed
 Iteration 7 completed
 Iteration 8 completed
 Iteration 9 completed
 Iteration 10 completed
 Iteration 11 completed
 Iteration 12 completed
 Iteration 13 completed
 Iteration 14 completed
 Iteration 15 completed
 Iteration 16 completed
    Best AR order p = 2, MA order q = 0, Interim metric = 1086.923

Additional Variable in VAR model = pib
 Iteration 17 completed
 Iteration 18 completed
 Iteration 19 completed
 Iteration 20 completed
 Iteration 21 completed
 Iteration 22 completed
 Iteration 23 completed
 Iteration 24 completed
 Iteration 25 completed
 Iteration 26 completed
 Iteration 27 completed
 Iteration 28 completed
 Iteration 29 completed
 Iteration 30 completed
 Iteration 31 completed
 Iteration 32 completed
    Best AR order p = 1, MA order q = 0, Interim metric = 1817.483

Additional Variable in VAR model = consumo
 Iteration 33 completed
 Iteration 34 completed
 Iteration 35 completed
 Iteration 36 completed
 Iteration 37 completed
 Iteration 38 completed
 Iteration 39 completed
 Iteration 40 completed
 Iteration 41 completed
 Iteration 42 completed
 Iteration 43 completed
 Iteration 44 completed
 Iteration 45 completed
 Iteration 46 completed
 Iteration 47 completed
 Iteration 48 completed
    Best AR order p = 2, MA order q = 0, Interim metric = 2087.613

Additional Variable in VAR model = ICST-R
 Iteration 49 completed
 Iteration 50 completed
 Iteration 51 completed
 Iteration 52 completed
 Iteration 53 completed
 Iteration 54 completed
 Iteration 55 completed
 Iteration 56 completed
 Iteration 57 completed
 Iteration 58 completed
 Iteration 59 completed
 Iteration 60 completed
 Iteration 61 completed
 Iteration 62 completed
 Iteration 63 completed
 Iteration 64 completed
    Best AR order p = 1, MA order q = 0, Interim metric = 1209.107

Additional Variable in VAR model = geracaoGWh
 Iteration 65 completed
 Iteration 66 completed
 Iteration 67 completed
 Iteration 68 completed
 Iteration 69 completed
 Iteration 70 completed
 Iteration 71 completed
 Iteration 72 completed
 Iteration 73 completed
 Iteration 74 completed
 Iteration 75 completed
 Iteration 76 completed
 Iteration 77 completed
 Iteration 78 completed
 Iteration 79 completed
 Iteration 80 completed
    Best AR order p = 2, MA order q = 0, Interim metric = 1680.358

Additional Variable in VAR model = IndGeral
 Iteration 81 completed
 Iteration 82 completed
 Iteration 83 completed
 Iteration 84 completed
 Iteration 85 completed
 Iteration 86 completed
 Iteration 87 completed
 Iteration 88 completed
 Iteration 89 completed
 Iteration 90 completed
 Iteration 91 completed
 Iteration 92 completed
 Iteration 93 completed
 Iteration 94 completed
 Iteration 95 completed
 Iteration 96 completed
    Best AR order p = 3, MA order q = 0, Interim metric = 1205.258
Best variable selected for VAR: ibc
    Root Mean Squared Error predictions vs actuals = 3,336,212.77
    Std Deviation of actuals = 1,842,443.27
    Normalized RMSE = 230%

Fold Number: 2 --&gt; Train Shape: 39 Test Shape: 5

Additional Variable in VAR model = ibc
 Iteration 1 completed
 Iteration 2 completed
 Iteration 3 completed
 Iteration 4 completed
 Iteration 5 completed
 Iteration 6 completed
 Iteration 7 completed
 Iteration 8 completed
 Iteration 9 completed
 Iteration 10 completed
 Iteration 11 completed
 Iteration 12 completed
 Iteration 14 completed
 Iteration 15 completed
 Iteration 16 completed
 Iteration 17 completed
    Best AR order p = 1, MA order q = 3, Interim metric = 1266.895

Additional Variable in VAR model = pib
 Iteration 17 completed
 Iteration 18 completed
 Iteration 19 completed
 Iteration 20 completed
 Iteration 21 completed
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> Iteration 22 completed
 Iteration 23 completed
 Iteration 24 completed
 Iteration 25 completed
 Iteration 26 completed
 Iteration 27 completed
 Iteration 28 completed
 Iteration 29 completed
 Iteration 30 completed
 Iteration 31 completed
 Iteration 32 completed
    Best AR order p = 3, MA order q = 0, Interim metric = 2100.818

Additional Variable in VAR model = consumo
 Iteration 33 completed
 Iteration 34 completed
 Iteration 35 completed
 Iteration 36 completed
 Iteration 37 completed
 Iteration 38 completed
 Iteration 39 completed
 Iteration 40 completed
 Iteration 41 completed
 Iteration 42 completed
 Iteration 43 completed
 Iteration 44 completed
 Iteration 45 completed
 Iteration 46 completed
 Iteration 47 completed
 Iteration 48 completed
    Best AR order p = 1, MA order q = 0, Interim metric = 2402.970

Additional Variable in VAR model = ICST-R
 Iteration 49 completed
 Iteration 50 completed
 Iteration 51 completed
 Iteration 52 completed
 Iteration 53 completed
 Iteration 54 completed
 Iteration 55 completed
 Iteration 56 completed
 Iteration 57 completed
 Iteration 58 completed
 Iteration 59 completed
 Iteration 60 completed
 Iteration 61 completed
 Iteration 62 completed
 Iteration 63 completed
 Iteration 64 completed
    Best AR order p = 3, MA order q = 0, Interim metric = 1411.005

Additional Variable in VAR model = geracaoGWh
 Iteration 65 completed
 Iteration 66 completed
 Iteration 67 completed
 Iteration 68 completed
 Iteration 69 completed
 Iteration 70 completed
 Iteration 71 completed
 Iteration 72 completed
 Iteration 73 completed
 Iteration 74 completed
 Iteration 75 completed
 Iteration 76 completed
 Iteration 77 completed
 Iteration 78 completed
 Iteration 79 completed
 Iteration 80 completed
    Best AR order p = 0, MA order q = 2, Interim metric = 1934.263

Additional Variable in VAR model = IndGeral
 Iteration 81 completed
 Iteration 82 completed
 Iteration 83 completed
 Iteration 84 completed
 Iteration 85 completed
 Iteration 86 completed
 Iteration 87 completed
 Iteration 88 completed
 Iteration 89 completed
 Iteration 90 completed
 Iteration 91 completed
 Iteration 92 completed
 Iteration 94 completed
 Iteration 95 completed
 Iteration 96 completed
 Iteration 97 completed
    Best AR order p = 1, MA order q = 3, Interim metric = 1407.631
Best variable selected for VAR: ibc
    Root Mean Squared Error predictions vs actuals = 5,130,089.69
    Std Deviation of actuals = 2,427,892.46
    Normalized RMSE = 318%

Fold Number: 3 --&gt; Train Shape: 44 Test Shape: 5

Additional Variable in VAR model = ibc
 Iteration 1 completed
 Iteration 2 completed
 Iteration 3 completed
 Iteration 4 completed
 Iteration 5 completed
 Iteration 6 completed
 Iteration 7 completed
 Iteration 8 completed
 Iteration 10 completed
 Iteration 11 completed
 Iteration 12 completed
 Iteration 13 completed
 Iteration 13 completed
 Iteration 14 completed
 Iteration 15 completed
 Iteration 16 completed
    Best AR order p = 3, MA order q = 0, Interim metric = 1431.387

Additional Variable in VAR model = pib
 Iteration 17 completed
 Iteration 18 completed
 Iteration 19 completed
 Iteration 20 completed
 Iteration 21 completed
 Iteration 22 completed
 Iteration 23 completed
 Iteration 24 completed
 Iteration 25 completed
 Iteration 26 completed
 Iteration 27 completed
 Iteration 28 completed
 Iteration 29 completed
 Iteration 30 completed
 Iteration 31 completed
 Iteration 32 completed
    Best AR order p = 3, MA order q = 0, Interim metric = 2377.296

Additional Variable in VAR model = consumo
 Iteration 33 completed
 Iteration 34 completed
 Iteration 35 completed
 Iteration 36 completed
 Iteration 37 completed
 Iteration 38 completed
 Iteration 39 completed
 Iteration 40 completed
 Iteration 41 completed
 Iteration 42 completed
 Iteration 43 completed
 Iteration 44 completed
 Iteration 45 completed
 Iteration 46 completed
 Iteration 47 completed
 Iteration 48 completed
    Best AR order p = 2, MA order q = 0, Interim metric = 2723.529

Additional Variable in VAR model = ICST-R
 Iteration 49 completed
 Iteration 50 completed
 Iteration 51 completed
 Iteration 52 completed
 Iteration 53 completed
 Iteration 54 completed
 Iteration 55 completed
 Iteration 56 completed
 Iteration 57 completed
 Iteration 58 completed
 Iteration 59 completed
 Iteration 60 completed
 Iteration 61 completed
 Iteration 62 completed
 Iteration 63 completed
 Iteration 64 completed
    Best AR order p = 3, MA order q = 0, Interim metric = 1605.029

Additional Variable in VAR model = geracaoGWh
 Iteration 65 completed
 Iteration 66 completed
 Iteration 67 completed
 Iteration 68 completed
 Iteration 69 completed
 Iteration 70 completed
 Iteration 71 completed
 Iteration 72 completed
 Iteration 73 completed
 Iteration 74 completed
 Iteration 75 completed
 Iteration 76 completed
 Iteration 77 completed
 Iteration 78 completed
 Iteration 79 completed
 Iteration 80 completed
    Best AR order p = 1, MA order q = 0, Interim metric = 2199.381

Additional Variable in VAR model = IndGeral
 Iteration 81 completed
 Iteration 82 completed
 Iteration 83 completed
 Iteration 84 completed
 Iteration 85 completed
 Iteration 86 completed
 Iteration 87 completed
 Iteration 88 completed
 Iteration 89 completed
 Iteration 90 completed
 Iteration 91 completed
 Iteration 92 completed
 Iteration 94 completed
 Iteration 95 completed
 Iteration 96 completed
 Iteration 97 completed
    Best AR order p = 2, MA order q = 2, Interim metric = 1591.386
Best variable selected for VAR: ibc
    Root Mean Squared Error predictions vs actuals = 2,304,476.50
    Std Deviation of actuals = 1,597,310.07
    Normalized RMSE = 103%

Fold Number: 4 --&gt; Train Shape: 49 Test Shape: 5

Additional Variable in VAR model = ibc
 Iteration 1 completed
 Iteration 2 completed
 Iteration 3 completed
 Iteration 4 completed
 Iteration 5 completed
 Iteration 6 completed
 Iteration 7 completed
 Iteration 8 completed
 Iteration 10 completed
 Iteration 11 completed
 Iteration 12 completed
 Iteration 13 completed
 Iteration 13 completed
 Iteration 14 completed
 Iteration 15 completed
 Iteration 16 completed
    Best AR order p = 3, MA order q = 0, Interim metric = 1584.702

Additional Variable in VAR model = pib
 Iteration 17 completed
 Iteration 18 completed
 Iteration 19 completed
 Iteration 20 completed
 Iteration 21 completed
 Iteration 22 completed
 Iteration 23 completed
 Iteration 24 completed
 Iteration 25 completed
 Iteration 26 completed
 Iteration 27 completed
 Iteration 28 completed
 Iteration 29 completed
 Iteration 30 completed
 Iteration 31 completed
 Iteration 32 completed
    Best AR order p = 1, MA order q = 0, Interim metric = 2658.927

Additional Variable in VAR model = consumo
 Iteration 33 completed
 Iteration 34 completed
 Iteration 35 completed
 Iteration 36 completed
 Iteration 37 completed
 Iteration 38 completed
 Iteration 39 completed
 Iteration 40 completed
 Iteration 41 completed
 Iteration 42 completed
 Iteration 43 completed
 Iteration 44 completed
 Iteration 45 completed
 Iteration 46 completed
 Iteration 47 completed
 Iteration 48 completed
    Best AR order p = 2, MA order q = 0, Interim metric = 3027.383

Additional Variable in VAR model = ICST-R
 Iteration 49 completed
 Iteration 50 completed
 Iteration 51 completed
 Iteration 52 completed
 Iteration 53 completed
 Iteration 54 completed
 Iteration 55 completed
 Iteration 56 completed
 Iteration 57 completed
 Iteration 58 completed
 Iteration 60 completed
 Iteration 60 completed
 Iteration 61 completed
 Iteration 62 completed
 Iteration 63 completed
 Iteration 64 completed
    Best AR order p = 1, MA order q = 1, Interim metric = 1772.519

Additional Variable in VAR model = geracaoGWh
 Iteration 65 completed
 Iteration 66 completed
 Iteration 67 completed
 Iteration 68 completed
 Iteration 69 completed
 Iteration 70 completed
 Iteration 71 completed
 Iteration 72 completed
 Iteration 73 completed
 Iteration 74 completed
 Iteration 75 completed
 Iteration 76 completed
 Iteration 77 completed
 Iteration 78 completed
 Iteration 79 completed
 Iteration 80 completed
    Best AR order p = 1, MA order q = 2, Interim metric = 2446.953

Additional Variable in VAR model = IndGeral
 Iteration 81 completed
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> Iteration 82 completed
 Iteration 83 completed
 Iteration 84 completed
 Iteration 85 completed
 Iteration 86 completed
 Iteration 87 completed
 Iteration 88 completed
 Iteration 89 completed
 Iteration 90 completed
 Iteration 91 completed
 Iteration 92 completed
 Iteration 93 completed
 Iteration 94 completed
 Iteration 95 completed
 Iteration 96 completed
    Best AR order p = 2, MA order q = 0, Interim metric = 1756.441
Best variable selected for VAR: ibc
    Root Mean Squared Error predictions vs actuals = 2,994,866.01
    Std Deviation of actuals = 2,471,810.70
    Normalized RMSE = 126%

Fold Number: 5 --&gt; Train Shape: 54 Test Shape: 5

Additional Variable in VAR model = ibc
 Iteration 1 completed
 Iteration 2 completed
 Iteration 3 completed
 Iteration 4 completed
 Iteration 5 completed
 Iteration 6 completed
 Iteration 7 completed
 Iteration 8 completed
 Iteration 9 completed
 Iteration 10 completed
 Iteration 11 completed
 Iteration 12 completed
 Iteration 13 completed
 Iteration 14 completed
 Iteration 15 completed
 Iteration 16 completed
    Best AR order p = 2, MA order q = 0, Interim metric = 1749.287

Additional Variable in VAR model = pib
 Iteration 17 completed
 Iteration 18 completed
 Iteration 19 completed
 Iteration 20 completed
 Iteration 21 completed
 Iteration 22 completed
 Iteration 23 completed
 Iteration 24 completed
 Iteration 25 completed
 Iteration 26 completed
 Iteration 27 completed
 Iteration 28 completed
 Iteration 29 completed
 Iteration 30 completed
 Iteration 31 completed
 Iteration 32 completed
    Best AR order p = 3, MA order q = 0, Interim metric = 2931.804

Additional Variable in VAR model = consumo
 Iteration 33 completed
 Iteration 34 completed
 Iteration 35 completed
 Iteration 36 completed
 Iteration 37 completed
 Iteration 38 completed
 Iteration 39 completed
 Iteration 40 completed
 Iteration 41 completed
 Iteration 42 completed
 Iteration 43 completed
 Iteration 44 completed
 Iteration 45 completed
 Iteration 46 completed
 Iteration 47 completed
 Iteration 48 completed
    Best AR order p = 2, MA order q = 0, Interim metric = 3346.837

Additional Variable in VAR model = ICST-R
 Iteration 49 completed
 Iteration 50 completed
 Iteration 51 completed
 Iteration 52 completed
 Iteration 53 completed
 Iteration 54 completed
 Iteration 55 completed
 Iteration 56 completed
 Iteration 57 completed
 Iteration 58 completed
 Iteration 59 completed
 Iteration 60 completed
 Iteration 61 completed
 Iteration 62 completed
 Iteration 63 completed
 Iteration 64 completed
    Best AR order p = 3, MA order q = 0, Interim metric = 1961.024

Additional Variable in VAR model = geracaoGWh
 Iteration 65 completed
 Iteration 66 completed
 Iteration 67 completed
 Iteration 68 completed
 Iteration 69 completed
 Iteration 70 completed
 Iteration 71 completed
 Iteration 72 completed
 Iteration 73 completed
 Iteration 74 completed
 Iteration 75 completed
 Iteration 76 completed
 Iteration 77 completed
 Iteration 78 completed
 Iteration 79 completed
 Iteration 80 completed
    Best AR order p = 3, MA order q = 0, Interim metric = 2706.800

Additional Variable in VAR model = IndGeral
 Iteration 81 completed
 Iteration 82 completed
 Iteration 83 completed
 Iteration 84 completed
 Iteration 85 completed
 Iteration 86 completed
 Iteration 87 completed
 Iteration 88 completed
 Iteration 90 completed
 Iteration 91 completed
 Iteration 92 completed
 Iteration 93 completed
 Iteration 93 completed
 Iteration 94 completed
 Iteration 95 completed
 Iteration 96 completed
    Best AR order p = 3, MA order q = 0, Interim metric = 1952.010
Best variable selected for VAR: ibc
    Root Mean Squared Error predictions vs actuals = 4,037,474.60
    Std Deviation of actuals = 1,365,998.89
    Normalized RMSE = 158%
Refitting data with previously found best parameters
    Best aic metric = 373910.9


==================================================
Building ML Model
==================================================



<span class=" -Color -Color-Bold">Running Machine Learning Models...</span>
    Shifting 6 predictors by lag=4 to align prior predictor with current target...
############## C L A S S I F Y I N G  V A R I A B L E S  ####################
Classifying variables in data set...
    6 Predictors classified...
        No variables removed since no ID or low-information variables found in data set

Fitting ML model
    44 variables used in training ML model = [&#39;ibc(t)&#39;, &#39;pib(t)&#39;, &#39;consumo(t)&#39;, &#39;ICST-R(t)&#39;, &#39;geracaoGWh(t)&#39;, &#39;IndGeral(t)&#39;, &#39;ibc(t-4)&#39;, &#39;pib(t-4)&#39;, &#39;consumo(t-4)&#39;, &#39;ICST-R(t-4)&#39;, &#39;geracaoGWh(t-4)&#39;, &#39;IndGeral(t-4)&#39;, &#39;total(t-4)&#39;, &#39;ibc(t-3)&#39;, &#39;pib(t-3)&#39;, &#39;consumo(t-3)&#39;, &#39;ICST-R(t-3)&#39;, &#39;geracaoGWh(t-3)&#39;, &#39;IndGeral(t-3)&#39;, &#39;total(t-3)&#39;, &#39;ibc(t-2)&#39;, &#39;pib(t-2)&#39;, &#39;consumo(t-2)&#39;, &#39;ICST-R(t-2)&#39;, &#39;geracaoGWh(t-2)&#39;, &#39;IndGeral(t-2)&#39;, &#39;total(t-2)&#39;, &#39;ibc(t-1)&#39;, &#39;pib(t-1)&#39;, &#39;consumo(t-1)&#39;, &#39;ICST-R(t-1)&#39;, &#39;geracaoGWh(t-1)&#39;, &#39;IndGeral(t-1)&#39;, &#39;total(t-1)&#39;, &#39;data_hour&#39;, &#39;data_minute&#39;, &#39;data_dayofweek&#39;, &#39;data_quarter&#39;, &#39;data_month&#39;, &#39;data_year&#39;, &#39;data_dayofyear&#39;, &#39;data_dayofmonth&#39;, &#39;data_weekofyear&#39;, &#39;data_weekend&#39;]

Running Cross Validation using XGBoost model..
Max. iterations using expanding window cross validation = 5

Fold Number: 1 --&gt; Train Shape: 31 Test Shape: 5
    Root Mean Squared Error predictions vs actuals = 2,390,012.61
    Std Deviation of actuals = 1,842,443.27
    Normalized RMSE = 130%
Cross Validation window: 1 completed

Fold Number: 2 --&gt; Train Shape: 36 Test Shape: 5
    Root Mean Squared Error predictions vs actuals = 4,747,269.81
    Std Deviation of actuals = 2,427,892.46
    Normalized RMSE = 196%
Cross Validation window: 2 completed

Fold Number: 3 --&gt; Train Shape: 41 Test Shape: 5
    Root Mean Squared Error predictions vs actuals = 2,445,545.86
    Std Deviation of actuals = 1,597,310.07
    Normalized RMSE = 153%
Cross Validation window: 3 completed

Fold Number: 4 --&gt; Train Shape: 46 Test Shape: 5
    Root Mean Squared Error predictions vs actuals = 2,137,170.68
    Std Deviation of actuals = 2,471,810.70
    Normalized RMSE = 86%
Cross Validation window: 4 completed

Fold Number: 5 --&gt; Train Shape: 51 Test Shape: 5
    Root Mean Squared Error predictions vs actuals = 4,183,978.02
    Std Deviation of actuals = 1,365,998.89
    Normalized RMSE = 306%
Cross Validation window: 5 completed

-------------------------------------------
Model Cross Validation Results:
-------------------------------------------
    MAE (as % Std Dev of Actuals) = 90.01%
    MAPE (Mean Absolute Percent Error) = 14%
    RMSE (Root Mean Squared Error) = 3355669.7130
    Normalized RMSE (MinMax) = 31%
    Normalized RMSE (as Std Dev of Actuals)= 112%
Average CV RMSE of all predictions (micro) = 3355669.71299

Fitting model on entire train set. Please be patient...
    Time taken to train model (in seconds) = 0

<span class=" -Color -Color-Bold">Best Model is: </span>auto_SARIMAX
    Best Model (Mean CV) Score: 2280061.69


--------------------------------------------------
Total time taken: 408 seconds.
--------------------------------------------------


Leaderboard with best model on top of list:
            name          rmse
1  auto_SARIMAX  2.280062e+06
3            ML  3.180795e+06
2           VAR  3.560624e+06
0       Prophet  3.740836e+06
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;auto_ts.auto_timeseries at 0x1e09a035208&gt;
</pre></div>
</div>
<img alt="_images/passo3-AutoTS-2019_12_8.png" src="_images/passo3-AutoTS-2019_12_8.png" />
<img alt="_images/passo3-AutoTS-2019_12_9.png" src="_images/passo3-AutoTS-2019_12_9.png" />
<img alt="_images/passo3-AutoTS-2019_12_10.png" src="_images/passo3-AutoTS-2019_12_10.png" />
<img alt="_images/passo3-AutoTS-2019_12_11.png" src="_images/passo3-AutoTS-2019_12_11.png" />
<img alt="_images/passo3-AutoTS-2019_12_12.png" src="_images/passo3-AutoTS-2019_12_12.png" />
<img alt="_images/passo3-AutoTS-2019_12_13.png" src="_images/passo3-AutoTS-2019_12_13.png" />
<img alt="_images/passo3-AutoTS-2019_12_14.png" src="_images/passo3-AutoTS-2019_12_14.png" />
</div>
</div>
<p>A ferramenta ofereceu um ranking…</p>
<p>Leaderboard with best model on top of list:
name          rmse
1  auto_SARIMAX  2.280062e+06
3            ML  3.180795e+06
2           VAR  3.560624e+06
0       Prophet  3.740836e+06</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Best =&gt; auto_SARIMAX</span>
<span class="n">predicao</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">testdata</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="n">resultado</span> <span class="o">=</span> <span class="n">predicao</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">&#39;yhat&#39;</span><span class="p">]]</span>
<span class="n">resultado</span> <span class="o">=</span> <span class="n">resultado</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">resultado</span> <span class="o">=</span> <span class="n">resultado</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="s1">&#39;data&#39;</span><span class="p">})</span>

<span class="n">real</span> <span class="o">=</span> <span class="n">testdata</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,[</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="s1">&#39;total&#39;</span><span class="p">]]</span>

<span class="n">final_2019</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">resultado</span><span class="p">,</span> <span class="n">real</span><span class="p">,</span> <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;inner&#39;</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">final_2019</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
<span class="n">y1</span> <span class="o">=</span> <span class="n">final_2019</span><span class="p">[</span><span class="s1">&#39;yhat&#39;</span><span class="p">]</span>
<span class="n">y2</span> <span class="o">=</span><span class="n">final_2019</span><span class="p">[</span><span class="s1">&#39;total&#39;</span><span class="p">]</span>

<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;AutoML - Resultado </span><span class="se">\&#39;</span><span class="s1">Best</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y1</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Previsto - 2019&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Real - 2019&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;O valor do rmse é: &#39;</span><span class="p">,</span> \
          <span class="n">mt</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mean_squared_error</span><span class="p">(</span><span class="n">final_2019</span><span class="p">[</span><span class="s1">&#39;yhat&#39;</span><span class="p">],</span> <span class="n">final_2019</span><span class="p">[</span><span class="s1">&#39;total&#39;</span><span class="p">])))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/passo3-AutoTS-2019_14_0.png" src="_images/passo3-AutoTS-2019_14_0.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>O valor do rmse é:  2212519.0524612465
</pre></div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "env_adp255"
        },
        kernelOptions: {
            kernelName: "env_adp255",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'env_adp255'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="passo3-CNN.html" title="previous page">CNN - Convolutional Neural Network</a>
    <a class='right-next' id="next-link" href="passo3-AutoTS-2020.html" title="next page">AutoTS 2020</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Grupo 2 -> Jheniffer, Marcos, Ronaldo G., Ronaldo L.<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>